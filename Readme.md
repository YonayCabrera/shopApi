# SHOP-API

## BEFORE START YOU NEED POSTGRES

To run your database you need install Docker before
After that run this sentences on bash:

- cd src/main/docker/
- docker build -t shoptheam .
- docker run --name shoptheam -p 5432:5432 -d shoptheam

Finally you can verify the container with
docker ps

## HOW USE THIS API

I give you Two admins to start use this api :
- name= yonay, email = yonaycl@gmail.com, password = iamadmin
- name= jose, email = jose@gmail.com, password = joseEsMiMeta

### FIRST YOU NEED TO LOG TO GET AUTHORIZATION TOKEN (USER AND ADMIN)

Here a sample with postman

![alt text](https://i.gyazo.com/6434d53a73087050ac20f4df1880e513.png)

With this token you can create more admins or users

### HOW TO CREATE, UPDATE, DELETE or GET USERS ONLY WITH ADMIN TOKEN

##### Here the rules

- The User have id, name, password, email, role, token
- The email and password are required, if you dont send any role
this user canÂ´t access to any query of customer or users
- The id is autogenerated and the token too
        
You can do it with the admin token, here a example:

![alt text](https://i.gyazo.com/f7d86b96f19a1ed187cfaa3a8ca7dfbd.png)

You need to send the token on all calls,
Here you can list all users with this query


#### GET ALL USERS

- ###### GET /users?token=admin-token

#### CREATE ONE USER

- ###### POST /createUser?token=admin-token

Here you need to send the data in the body("email" and "password" required)

![alt text](https://i.gyazo.com/8bd164a6dacb1f0697f11fd4c229567b.png)

#### UPDATE ONE USER

- ###### PUT /users/id-of-user?token=admin-token

You need to put id param and send request body like this:

![alt_text](https://i.gyazo.com/9df4418a9b6b7e964c8a63f91e56651c.png)


![alt_text](https://i.gyazo.com/8069587c79a44361752647065d4e0ce2.png)

#### DELETE ONE USER

- ###### DELETE /users/id-of-user?token=admin-token

You need to put id param

![alt_text](https://i.gyazo.com/3b3dad53e6cffe6c763098fa5cfb9e14.png)

### HOW TO CREATE, UPDATE, DELETE or GET CUSTOMERS ONLY WITH ADMIN OR USER TOKEN

##### Here the rules

- The Customer have id, name, surname, image, lastChange, CreatedBy
- The name, surname, image are required
- The id is autogenerated

You can do it with the admin token and user token

#### GET ALL CUSTOMERS

- ###### GET /customers?token=admin-or-user-token

![alt_text](https://i.gyazo.com/d6d20ab89627989c4162e42375a08ac4.png)

#### CREATE ONE CUSTOMER

- ###### POST /createCustomer?token=admin-or-user-token

Here you need to send the data in the body("name", "surname", "image" required)

![alt_text](https://i.gyazo.com/010e8c3cdf860a9d3128955691fbeb0a.png)

#### GET ONE CUSTOMER

- ###### GET /customers/id-of-customer?token=admin-or-user-token

You need to put customer id param

![alt_text](https://i.gyazo.com/8182ebbe02839aa7d975bce64dfb8419.png)

#### UPDATE ONE CUSTOMER

- ###### PUT /customers/id-of-customer?token=admin-or-user-token

You need to put customer id param  and send request body like this:

![alt_text](https://i.gyazo.com/c651ad8488599ead5beffd75c9c54e33.png)

![alt_text](https://i.gyazo.com/8e0b15f312e83450df1cb9c5d615c60f.png)

#### DELETE ONE CUSTOMER

- ###### DELETE /customers/id-of-customer?token=admin-or-user-token

You need to put customer id param like this:

![alt_text](https://i.gyazo.com/1a8d23f4cc57cd64ffd9cf89aa857667.png)
